\section{Address Translation}

\subsection{Virtual to Physical Address}

\begin{lstlisting}[language=C]
typedef struct {
    unsigned int page_number : 10;
    unsigned int offset : 12;
} VirtualAddress;

typedef struct {
    unsigned int frame_number : 10;
    unsigned int valid : 1;
    unsigned int protection : 2;
} PageTableEntry;

unsigned int virtual_to_physical(VirtualAddress va, 
                                 PageTableEntry *page_table) {
    PageTableEntry entry = page_table[va.page_number];
    if (entry.valid) {
        return (entry.frame_number << 12) | va.offset;
    }
    return 0;  // Page fault
}
\end{lstlisting}

\subsection{Segmentation}

\begin{lstlisting}[language=C]
typedef struct {
    unsigned int base;
    unsigned int limit;
    int protection;
} SegmentDescriptor;

unsigned int segmented_address(unsigned int logical_addr,
                               SegmentDescriptor *segment) {
    if (logical_addr <= segment->limit) {
        return segment->base + logical_addr;
    }
    return 0;  // Segmentation fault
}
\end{lstlisting}
