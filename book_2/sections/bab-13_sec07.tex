\section{Memory Layout untuk Program Contoh}

Mari kita analisis memory layout untuk program yang lebih kompleks:

\begin{lstlisting}[language=C++, caption={Program contoh untuk analisis memory layout}]
int global_var = 100;           // Static/Global
static int static_var = 200;    // Static

int* createArray(int size) {    // Function
    int* arr = new int[size];   // Heap allocation
    return arr;
}

int factorial(int n) {         // Function
    static int counter = 0;     // Static local
    counter++;
    
    if (n <= 1) return 1;
    int temp = n * factorial(n - 1);  // Stack: recursive
    return temp;
}

int main() {                    // Function
    int local_a = 10;           // Stack: local variable
    int local_b = 20;           // Stack: local variable
    
    int* heap_array = createArray(100);  // Heap allocation
    
    int result = factorial(5);  // Stack: recursive calls
    
    delete[] heap_array;        // Heap deallocation
    return 0;
}
\end{lstlisting}

Memory layout saat eksekusi:

\begin{verbatim}
High Address
    +---------------------+
    |  Stack (grows down) |
    |                     |
    |  [factorial(1) AR]  | <- Top of stack
    |    n = 1            |
    |    temp = ?          |
    |    return addr       |
    +----------------------+
    |  [factorial(2) AR]  |
    |    n = 2            |
    |    temp = ?          |
    +----------------------+
    |  ...                |
    +----------------------+
    |  [factorial(5) AR]  |
    |    n = 5            |
    |    temp = ?          |
    +----------------------+
    |  [main AR]          |
    |    local_a = 10     |
    |    local_b = 20     |
    |    heap_array = ptr |
    |    result = ?        |
    +----------------------+
    |                     |
    |  (free space)       |
    |                     |
    +----------------------+
    |  Heap (grows up)    |
    |  [heap_array[100]]  | <- 100 integers
    +----------------------+
    |  BSS                |
    |  (uninitialized)    |
    +----------------------+
    |  Data (initialized) |
    |    global_var = 100 |
    |    static_var = 200 |
    |    counter = ?       |
    +----------------------+
    |  Text/Code          |
    |  (instructions)     |
Low Address
\end{verbatim}