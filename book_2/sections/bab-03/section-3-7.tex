\section{Handling Komentar dan Kesalahan}

\subsection{Whitespace dan Pelacakan Posisi}
Kompilator umumnya mengabaikan \textit{whitespace} (spasi, tab, newline) kecuali pada bahasa sensitif-indentasi seperti Python. Namun, whitespace memiliki peran krusial: memperbarui penghitung baris (\texttt{line counter}). Informasi baris ini sangat vital untuk pesan kesalahan nanti.
\begin{lstlisting}[language=C++]
void Lexer::skipWhitespace() {
    while (isspace(peek())) {
        if (peek() == '\n') {
            line++; col = 0; // Reset kolom
        } else {
            col++;
        }
        advance();
    }
}
\end{lstlisting}

\subsection{Penanganan Komentar Bersarang}
Komentar C standar (\texttt{/* ... */}) tidak mendukung \textit{nesting}. Jika parser menemukan \texttt{/* A /* B */ C */}, ia akan berhenti pada \texttt{*/} pertama (setelah B), menyebabkan \texttt{C */} dianggap sebagai kode \textit{syntax error}. Jika ingin mendukung \textit{nested comments} (seperti di Swift), lexer harus menggunakan counter kedalaman.

\subsection{Strategi Pemulihan Kesalahan Leksikal}
Ketika lexer menemukan karakter ilegal (misal: \texttt{@} di C), ia tidak boleh langsung \textit{crash}. Ada beberapa strategi pemulihan:
\begin{itemize}
    \item \textbf{Panic Mode}: Abaikan karakter bermasalah dan coba lanjut memindai karakter berikutnya. Ini strategi paling umum.
    \item \textbf{Error Token}: Kembalikan token khusus \texttt{TK\_ERROR} ke parser, biarkan parser yang memutuskan apakah akan berhenti atau mencoba pulih.
    \item \textbf{Deletion/Insertion}: Mencoba menghapus karakter aneh atau menyisipkan karakter yang hilang (misal: menutup string yang terbuka), tapi ini berisiko mengubah makna program.
\end{itemize}

\begin{figure}[!htbp]
    \centering
    \adjustbox{max width=0.8\textwidth,center}{%
    \begin{tikzpicture}[
        char/.style={rectangle, draw=blue!50, fill=blue!10, minimum width=0.6cm, font=\tiny},
        err/.style={rectangle, draw=red!50, fill=red!10, minimum width=1.5cm, font=\tiny, align=center},
        arrow/.style={->, >=stealth, thick}
    ]
    \node[char] (c1) {"}; \node[char, right=0.2cm of c1] (c2) {h}; \node[char, right=0.2cm of c2] (c3) {e};
    \node[char, right=0.2cm of c3] (c4) {EOF};
    \node[err, below=0.6cm of c4] (msg) {Error: Unclosed String};
    \draw[arrow, red] (c4) -- (msg);
    \end{tikzpicture}%
    }
    \caption{Ilustrasi unclosed string error}
\end{figure}
